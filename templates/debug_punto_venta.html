<!DOCTYPE html>
<html>
<head>
    <title>Diagnóstico Punto de Venta</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f8f9fa; }
        .card { background: white; padding: 20px; margin: 15px 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .success { border-left: 4px solid #28a745; }
        .warning { border-left: 4px solid #ffc107; }
        .danger { border-left: 4px solid #dc3545; }
        .info { border-left: 4px solid #17a2b8; }
        .producto { padding: 12px; margin: 8px 0; background: white; border-radius: 5px; border-left: 4px solid #007bff; }
        .activo { border-left-color: #28a745; }
        .inactivo { border-left-color: #dc3545; }
        .sin-stock { border-left-color: #ffc107; }
        button { background: #007bff; color: white; border: none; padding: 10px 15px; margin: 5px; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .stats { display: flex; gap: 15px; margin: 15px 0; }
        .stat-card { flex: 1; padding: 15px; background: white; border-radius: 5px; text-align: center; }
    </style>
</head>
<body>
    <h1>🔧 Diagnóstico del Punto de Venta</h1>
    
    <div class="card info">
        <h3>📊 Resumen General</h3>
        <div class="stats">
            <div class="stat-card">
                <h4>Total Productos</h4>
                <p style="font-size: 24px; font-weight: bold;">{{ debug.total_productos }}</p>
            </div>
            <div class="stat-card">
                <h4>Activos con Stock</h4>
                <p style="font-size: 24px; font-weight: bold; color: #28a745;">{{ debug.productos_activos_con_stock }}</p>
            </div>
            <div class="stat-card">
                <h4>Producción</h4>
                <p style="font-size: 24px; font-weight: bold; color: #17a2b8;">{{ debug.productos_produccion }}</p>
            </div>
            <div class="stat-card">
                <h4>Recetas con Producto</h4>
                <p style="font-size: 24px; font-weight: bold; color: #6f42c1;">{{ debug.recetas_con_producto }}</p>
            </div>
        </div>
    </div>

    <div class="card">
        <h3>🔍 Productos en Base de Datos</h3>
        {% for producto in debug.detalle_productos %}
        <div class="producto {% if producto.aparece_en_busqueda %}activo{% elif producto.stock_actual == 0 %}sin-stock{% else %}inactivo{% endif %}">
            <strong>{{ producto.nombre }}</strong><br>
            <small>
                Tipo: {{ producto.tipo }} | 
                Activo: <strong>{{ producto.activo }}</strong> | 
                Stock: <strong>{{ producto.stock_actual }}</strong> | 
                Precio: ${{ producto.precio }} |
                En búsqueda: <strong>{{ producto.aparece_en_busqueda }}</strong>
            </small>
        </div>
        {% endfor %}
    </div>

    <div class="card">
        <h3>📋 Recetas y sus Productos</h3>
        {% for receta in debug.detalle_recetas %}
        <div class="producto {% if receta.producto_stock > 0 %}activo{% else %}sin-stock{% endif %}">
            <strong>{{ receta.nombre }}</strong><br>
            <small>
                Producto: {{ receta.producto_nombre }} | 
                Stock: <strong>{{ receta.producto_stock }}</strong>
            </small>
        </div>
        {% endfor %}
    </div>

    <div class="card success">
        <h3>🚀 Acciones Rápidas</h3>
        <button onclick="location.href='/punto_venta'">Ir al Punto de Venta</button>
        <button onclick="location.href='/diagnostico_productos'">Diagnóstico Completo</button>
        <button onclick="location.href='/produccion_diaria'">Ver Producción</button>
        <button onclick="location.href='/materias_primas'">Ver Materias Primas</button>
        <button onclick="location.href='/recetas'">Ver Recetas</button>
        <button onclick="location.href='/configuracion_facturacion'">Configurar Facturación</button>
    
    </div>
    </div>
</body>
</html>